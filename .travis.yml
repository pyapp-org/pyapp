language: python
sudo: false
python:
  - "3.6"
  - "3.7"
  - "pypy"

branches:
  only:
    - master
    - development

install:
  - travis_retry pip install bandit pytest pytest-cov mock

script:
  - bandit -ll -r pyapp
  - py.test tests/ --cov=pyapp

after_success:
  - bash <(curl -s https://codecov.io/bash)
